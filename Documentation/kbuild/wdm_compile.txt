
		       Build Windows Drivers

1. Software Requirements:
   Get current latest wdk version from the URL below:
   http://www.microsoft.com/download/en/details.aspx?id=11800

2. Build Environments:
   Following target platform has been tested:
   Windows 2000
   Windows server 2003
   Windows vista and windows server 2008
   Windows xp

3. Compile the kernel driver
   3.1 run WDK's "Checked/Free Build Environment";
   3.2 stay in the "scripts\driver" folder;
   3.3 type "build" or "build /c".

4. Sign the kernel driver
   4.1 stay any sub folder under sdfirm top-dir;
   4.2 type "<path to scripts folder>\wdm-signdriver.bat";
   4.3 type "wdm-signdriver.bat /?" for help informations.

5. How to build libusb
   5.1 Compile kernel driver
       5.1.1 run WDK's "Checked/Free Build Environment";
       5.1.2 stay in the "scripts\usbstub" folder;
       5.1.3 type "build" or "build /c";
       if no error occurred, usbstub.sys will be generated into following
       folder:
       scripts\usbstub\objchk_wlh_x86\i386;
       NOTE: According to your build environment, objchk_wlh_x86 may
             differs.
   5.2 Compile user tool
       5.2.1 open libusb.dsw in the "sdfirm\scripts\libusb" folder;
       5.2.2 set active project->libusb;
       5.2.3 rebuild all;
       if no error occurred, libusb.lib will be generated;
       5.2.4 set active project->inf_wizard;
       5.2.5 rebuild all;
       5.2.6 run inf_wizard.exe;
       5.2.7 select existed device -> next -> next;
       5.2.8 save usbstub.inf to the path where usbstub.sys is generated;
       finish inf_wizard, ignore *.cat files generated by inf_wizard.

6. How to build usbdfu
   6.1 Compile kernel driver
       6.1.1 run wdk Checked/Free Build Environment;
       6.1.2 stay in the "scripts\usbdfu" folder;
       6.1.3 type "build" or "build /c";
       if no error occurred, usbdfu.sys will be generated into following
       folder:
       scripts\usbdfu\objchk_wlh_x86\i386;
       NOTE: According to your build environment, objchk_wlh_x86 may
             differs.
   6.2 Compile user tool
       6.2.1 open windfu.dsw in the "sdfirm\scripts\windfu" folder;
       6.2.2 set active project->windfu;
       6.2.3 rebuild all;
       if no error occurred, run windfu.exe.

                                                             by Renjie Yin
